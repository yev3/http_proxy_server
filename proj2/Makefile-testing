###############################################################################
# Makefile for testing
###############################################################################

EXECUTABLES=test
SOURCES:= helpers.cpp test.cpp
OBJECTS=$(SOURCES:.cpp=.o)
CFLAGS=-Wall -std=c++11

.PHONY: all
all: optimized

test: $(OBJECTS)
	g++ $(CFLAGS) $(OBJECTS) -o $@

.INTERMEDIATE: optimized
optimized: CFLAGS+=-O3
optimized: test

debug: CFLAGS += -g -D_DEBUG
debug: test

# .INTERMEDIATE: %.o
%.o : %.cpp
	g++ -c $(CFLAGS) $< -o $@

clean: 
	rm -f $(EXECUTABLES) $(OBJECTS)
